{"mappings":"8pBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,CAAC,EAoBfF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,GAElC,EAaAL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,CACT,C,sCC0BA,IAAAE,E,6EA5CA,IAAIC,EAAY,CAAC,EA6BjB,SAASC,EAAWC,GAClB,OAAQ,GAAKA,GAAKC,QAAQ,0EAA2E,MAAQ,GAC/G,CAaAJ,EA1CA,SAA4BH,GAC1B,IAAIQ,EAAQJ,EAAUJ,GAOtB,OALKQ,IACHA,EAOJ,WACE,IACE,MAAM,IAAIN,KASZ,CARE,MAAOO,GACP,IAAIC,GAAW,GAAKD,EAAIE,OAAOC,MAAM,oEAErC,GAAIF,EAGF,OAAOL,EAAWK,EAAQ,GAE9B,CAEA,MAAO,GACT,CArBYG,GACRT,EAAUJ,GAAMQ,GAGXA,CACT,C,ICbAM,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,6JCAxCH,EAAA,SAAAI,aAA6C,SAAWJ,EAAA,SAAAK,QAA6C,S,SCoI/G,SAASC,EAAwBC,GACtC,OAAOA,EACJC,KAAIC,IACH,MAAMC,OAAEA,EAAMxB,GAAEA,EAAEyB,YAAEA,EAAWC,MAAEA,EAAKC,aAAEA,EAAYC,aAAEA,GACpDL,EACIM,EAfL,SAA+BL,GACpC,OAAsB,IAAlBA,EAAOzB,OACF,QACEyB,EAAOzB,QAAU,EACnByB,EAAOF,KAAIQ,GAASA,EAAMC,OAE1B,GAAGP,EAAO,GAAGO,SAASP,EAAO,GAAGO,aAE3C,CAO2BC,CAAsBR,GAE3C,MAAO,8CAA8CxB,8GAGhCyB,EAAa,kCAAkCA,IAAgBQ,EAAAC,iCAC/DR,0SAM0BC,EAAaQ,QAAQ,iLAKhCT,kGAEMG,6DACAO,OAAOC,SAAST,8EAG7C,IAEdU,KAAK,GACV,CCnKAJ,EAAiBpB,EAAA,SAAAI,aAA6C,SAAWJ,EAAA,SAAAK,QAA6C,SCEtH,MAAMoB,EAAOC,SAASC,cAAc,kBAC9BC,EAAiBF,SAASC,cAAc,2BACxCE,EAAeH,SAASC,cAAc,yBAItCG,EAAeC,aAAaC,QAFf,iBAGbC,EAAaF,aAAaC,QAFd,eCNlBE,OAAOC,YDyCHV,EAAKW,UADHH,EACe3B,EAAwBJ,KAAKC,MAAM8B,IAGlD,8EAjCJJ,EAAaQ,iBAAiB,SAAS,KACrCT,EAAeU,UAAUC,OAAO,4BAChCV,EAAaS,UAAUE,IAAI,4BAEzBf,EAAKW,UADHH,EACe3B,EAAwBJ,KAAKC,MAAM8B,IAGlD,4EAEJ,IAKFL,EAAeS,iBAAiB,SAAS,KACvCR,EAAaS,UAAUC,OAAO,4BAC9BX,EAAeU,UAAUE,IAAI,4BAG3Bf,EAAKW,UADHN,EACexB,EAAwBJ,KAAKC,MAAM2B,IAGlD,8EAEJ,G","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-f99f246b58369ff8.js","node_modules/@parcel/runtime-js/lib/runtime-24ea5c11b53e0e27.js","src/js/markup.js","node_modules/@parcel/runtime-js/lib/runtime-f0db78df90b836cb.js","src/js/library-markup.js","src/library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2Y0K8\\\":\\\"library.08c0e29f.js\\\",\\\"hBMgR\\\":\\\"backdrop-kino.27c72f8a.jpg\\\",\\\"4O56q\\\":\\\"movie-pic.fe810275.jpg\\\"}\"));","module.exports = require('./helpers/bundle-url').getBundleURL('2Y0K8') + require('./helpers/bundle-manifest').resolve(\"hBMgR\");","import defaultImgBack from '../images/backdrop-kino.jpg';\nimport defaultImg from '../images/movie-pic.jpg';\n\nexport function createMarkupFilmsList(moviesData) {\n  return moviesData\n    .map(movie => {\n      const { genres, id, imgUrl, name, rating, year } = movie;\n      const genresToShow = trimGenresList(genres);\n\n      return `<li class=\"films__item js-target\" data-id=\"${id}\">\n                <div class=\"films__img-wrapper\">\n                  <img\n                  src=\"${imgUrl}\"\n                  alt=\"${name}\"\n                  class=\"films__img\" loading=\"lazy\"\n                  />\n                  <div class=\"rating\">\n                   <p class=\"films__desk\">\n                     <span class=\"films__rating--text\"> Rating: </span>\n                     <span class=\"films__rating\">${rating}</span>\n                    </p>\n                  </div>\n                </div>\n               <div class=\"films__info\">\n                 <p class=\"films__name\">${name}</p>\n                 <p class=\"films__desk\">\n                   <span class=\"films__genre\">${genresToShow}</span> |\n                   <span class=\"films__year\">${year}</span>\n                 </p> \n                </div>\n              </li>`;\n    })\n    .join('');\n}\n\n//  function render to main page first 3 genres\nexport function trimGenresList(genres) {\n  if (genres.length === 0) {\n    return `Other`;\n  } else if (genres.length <= 3) {\n    return genres.join(', ');\n  } else {\n    return `${genres[0]}, ${genres[1]}, Other`;\n  }\n}\n\n// Function for render about movies in modal window\nexport function createMarkupSelectedMovie(moviesData) {\n  const {\n    poster_path,\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    genres,\n    overview,\n  } = moviesData;\n\n  const markup = ` <img class='modal-poster'\n  src=\"${\n    poster_path ? `https://image.tmdb.org/t/p/w500${poster_path}` : defaultImg\n  }\"\n   alt=${title}\n  \n   width='240'/>\n <div>\n   <div>\n     <h2 class='modal-movie-title'>${title}</h2>\n\n     <div class='wrap-flex'>\n          <p class='movie-label'>Vote / Votes</p>\n          <p class='movie-disc disc-wrap'>\n           <span class='accent-detail__orange'>\n            ${vote_average.toFixed(1)}</span>\n            <span class='disc-space'> / </span> <span class=\"accent-detail__gray\">${vote_count}</span>\n         </p>\n     </div>\n     <div class='wrap-flex'>\n         <p class='movie-label'>Popularity</p>\n          <p class='movie-disc'>${popularity.toFixed(1)}</p>\n     </div>\n     <div class='wrap-flex'>\n         <p class='movie-label'>Original Title</p>\n         <p class='movie-disc movie-disc-title'>${original_title}</p>\n     </div>\n     <div class='wrap-flex'>\n        <p class='movie-label'>Genre</p>\n        <p class='movie-disc movie-disc-genres'>${genres\n          .map(genre => genre.name)\n          .join(', ')}</p>\n     </div>\n\n     <h3 class='disc-title'>About</h3>\n     <p class='disc-text'>${overview}</p>\n   </div>\n   <div class='button-container'>\n     <button type='button'  class='modal-btn btn-watched js-btn-watched'>add to watched</button>\n     <button type='button'class='modal-btn btn-queue js-btn-queue'>\n       add to queue\n     </button>\n   </div>\n   </div>\n </div>`;\n  document.querySelector('.wrap-disc').innerHTML = markup;\n\n  document\n    .querySelector('.backdrop')\n    .setAttribute(\n      'style',\n      `background-image: url(https://image.tmdb.org/t/p/original/${moviesData.backdrop_path}); background-position: center; background-size: cover;`\n    );\n  if (moviesData.backdrop_path === null) {\n    document\n      .querySelector('.backdrop')\n      .setAttribute(\n        'style',\n        `background-image: url(${defaultImgBack}); background-position: center; background-size: cover;`\n      );\n  }\n}\n\nexport function trimGenresLibraryList(genres) {\n  if (genres.length === 0) {\n    return `Other`;\n  } else if (genres.length <= 3) {\n    return genres.map(genre => genre.name);\n  } else {\n    return `${genres[0].name}, ${genres[1].name}, Other`;\n  }\n}\n\nexport function createMarkupLibraryList(moviesData) {\n  return moviesData\n    .map(movie => {\n      const { genres, id, poster_path, title, vote_average, release_date } =\n        movie;\n      const filterGenres = trimGenresLibraryList(genres);\n\n      return `<li class=\"films__item js-target\" data-id=\"${id}\">\n                  <div class=\"films__img-wrapper\">\n                   <img\n                    src=\"${poster_path? `https://image.tmdb.org/t/p/w500${poster_path}` : defaultImg}\"\n                    alt=\"${title}\"\n                    class=\"films__img\" loading=\"lazy\"\n                   />\n                   <div class=\"rating\">\n                     <p class=\"films__desk\">\n                       <span class=\"films__rating--text\"> Rating: </span>\n                       <span class=\"films__rating\">${vote_average.toFixed(1)}</span>\n                     </p>\n                    </div>\n                  </div>\n               <div class=\"films__info\">\n                 <p class=\"films__name\">${title}</p>\n                 <p class=\"films__desk\">\n                   <span class=\"films__genre\">${filterGenres}</span> |\n                    <span class=\"films__year\">${Number.parseInt(release_date)}</span>\n                  </p>\n               </div>\n             </li>`;\n    })\n    .join('');\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('2Y0K8') + require('./helpers/bundle-manifest').resolve(\"4O56q\");","import { createMarkupLibraryList } from './markup';\n\nconst list = document.querySelector('.js-films-list');\nconst libraryWatcehd = document.querySelector('.js-btn-library-watched');\nconst libraryQueue = document.querySelector('.js-btn-library-queue');\n\nconst watchedKey = 'watchedMovies';\nconst queuedKey = 'queueMovies';\nconst watchedFilms = localStorage.getItem(watchedKey);\nconst queueFilms = localStorage.getItem(queuedKey);\n\nexport function onQueue() {\n  libraryQueue.addEventListener('click', () => {\n    libraryWatcehd.classList.remove('main-btn--library-active');\n    libraryQueue.classList.add('main-btn--library-active');\n    if (queueFilms) {\n      list.innerHTML = createMarkupLibraryList(JSON.parse(queueFilms));\n    } else {\n      list.innerHTML =\n        '<div style=\"height: 500px; font-size: 24px\">Add films to your queue!</div>';\n      return;\n    }\n  });\n}\n\nexport function onWatched() {\n  libraryWatcehd.addEventListener('click', () => {\n    libraryQueue.classList.remove('main-btn--library-active');\n    libraryWatcehd.classList.add('main-btn--library-active');\n\n    if (watchedFilms) {\n      list.innerHTML = createMarkupLibraryList(JSON.parse(watchedFilms));\n    } else {\n      list.innerHTML =\n        '<div style=\"height: 500px; font-size: 24px\">Add films to your watched!</div>';\n      return;\n    }\n  });\n}\n\nexport function onLoadLibrary() {\n  if (queueFilms) {\n    list.innerHTML = createMarkupLibraryList(JSON.parse(queueFilms));\n  } else {\n    list.innerHTML =\n      '<div style=\"height: 500px; font-size: 24px\">Add films to your queue!</div>';\n    return;\n  }\n}\n","import { onQueue, onWatched, onLoadLibrary } from './js/library-markup';\nwindow.onload = onLoadLibrary();\n\nonQueue();\nonWatched();\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","getBundleURL","resolve","$1457a8b41868a85b$export$3fbdede40b605168","moviesData","map","movie","genres","poster_path","title","vote_average","release_date","filterGenres","genre","name","$1457a8b41868a85b$export$da0673e568f6360c","$parcel$interopDefault","$89ffafe6f78d0158$exports","toFixed","Number","parseInt","join","$62d1563ef9474d0b$var$list","document","querySelector","$62d1563ef9474d0b$var$libraryWatcehd","$62d1563ef9474d0b$var$libraryQueue","$62d1563ef9474d0b$var$watchedFilms","localStorage","getItem","$62d1563ef9474d0b$var$queueFilms","window","onload","innerHTML","addEventListener","classList","remove","add"],"version":3,"file":"library.08c0e29f.js.map"}