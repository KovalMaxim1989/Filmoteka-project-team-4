{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,CAAC,EAoBfF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,GAElC,EAaAL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,CACT,C,ICpBAE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,6JCAxC,IAAAC,IAAoBJ,EAAA,SAAAK,QAA6C,SAAAC,OAAAC,KAAAC,KAAUC,W,SCoIrF,SAASC,EAAwBC,GACtC,OAAOA,EACJC,KAAIC,IACH,MAAMC,OAAEA,EAAMjB,GAAEA,EAAEkB,YAAEA,EAAWC,MAAEA,EAAKC,aAAEA,EAAYC,aAAEA,GACpDL,EACIM,EAfL,SAA+BL,GACpC,OAAsB,IAAlBA,EAAOlB,OACF,QACEkB,EAAOlB,QAAU,EACnBkB,EAAOF,KAAIQ,GAASA,EAAMC,OAE1B,GAAGP,EAAO,GAAGO,SAASP,EAAO,GAAGO,aAE3C,CAO2BC,CAAsBR,GAE3C,MAAO,8CAA8CjB,8GAGhCkB,EAAa,kCAAkCA,IAAgBQ,EAAAC,iCAC/DR,0SAM0BC,EAAaQ,QAAQ,iLAKhCT,kGAEMG,6DACAO,OAAOC,SAAST,8EAG7C,IAEdU,KAAK,GACV,CCnKAJ,EAAiB,IAAApB,IAAoBJ,EAAA,SAAAK,QAA6C,SAAAC,OAAAC,KAAAC,KAAUC,WCE5F,MAAMoB,EAAOC,SAASC,cAAc,kBAC9BC,EAAiBF,SAASC,cAAc,2BACxCE,EAAeH,SAASC,cAAc,yBAItCG,EAAeC,aAAaC,QAFf,iBAGbC,EAAaF,aAAaC,QAFd,eCNlBE,OAAOC,YDyCHV,EAAKW,UADHH,EACe3B,EAAwBR,KAAKC,MAAMkC,IAGlD,8EAjCJJ,EAAaQ,iBAAiB,SAAS,KACrCT,EAAeU,UAAUC,OAAO,4BAChCV,EAAaS,UAAUE,IAAI,4BAEzBf,EAAKW,UADHH,EACe3B,EAAwBR,KAAKC,MAAMkC,IAGlD,4EAEJ,IAKFL,EAAeS,iBAAiB,SAAS,KACvCR,EAAaS,UAAUC,OAAO,4BAC9BX,EAAeU,UAAUE,IAAI,4BAG3Bf,EAAKW,UADHN,EACexB,EAAwBR,KAAKC,MAAM+B,IAGlD,8EAEJ","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-8fb6ed888be46d16.js","node_modules/@parcel/runtime-js/lib/runtime-72db8a40160902d2.js","src/js/markup.js","node_modules/@parcel/runtime-js/lib/runtime-c2c63b2609748797.js","src/js/library-markup.js","src/library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"library.efeed685.js\\\",\\\"devKS\\\":\\\"backdrop-kino.27c72f8a.jpg\\\",\\\"dATrs\\\":\\\"movie-pic.fe810275.jpg\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"devKS\")).toString();","import defaultImgBack from '../images/backdrop-kino.jpg';\nimport defaultImg from '../images/movie-pic.jpg';\n\nexport function createMarkupFilmsList(moviesData) {\n  return moviesData\n    .map(movie => {\n      const { genres, id, imgUrl, name, rating, year } = movie;\n      const genresToShow = trimGenresList(genres);\n\n      return `<li class=\"films__item js-target\" data-id=\"${id}\">\n                <div class=\"films__img-wrapper\">\n                  <img\n                  src=\"${imgUrl}\"\n                  alt=\"${name}\"\n                  class=\"films__img\" loading=\"lazy\"\n                  />\n                  <div class=\"rating\">\n                   <p class=\"films__desk\">\n                     <span class=\"films__rating--text\"> Rating: </span>\n                     <span class=\"films__rating\">${rating}</span>\n                    </p>\n                  </div>\n                </div>\n               <div class=\"films__info\">\n                 <p class=\"films__name\">${name}</p>\n                 <p class=\"films__desk\">\n                   <span class=\"films__genre\">${genresToShow}</span> |\n                   <span class=\"films__year\">${year}</span>\n                 </p> \n                </div>\n              </li>`;\n    })\n    .join('');\n}\n\n//  function render to main page first 3 genres\nexport function trimGenresList(genres) {\n  if (genres.length === 0) {\n    return `Other`;\n  } else if (genres.length <= 3) {\n    return genres.join(', ');\n  } else {\n    return `${genres[0]}, ${genres[1]}, Other`;\n  }\n}\n\n// Function for render about movies in modal window\nexport function createMarkupSelectedMovie(moviesData) {\n  const {\n    poster_path,\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    genres,\n    overview,\n  } = moviesData;\n\n  const markup = ` <img class='modal-poster'\n  src=\"${\n    poster_path ? `https://image.tmdb.org/t/p/w500${poster_path}` : defaultImg\n  }\"\n   alt=${title}\n  \n   width='240'/>\n <div>\n   <div>\n     <h2 class='modal-movie-title'>${title}</h2>\n\n     <div class='wrap-flex'>\n          <p class='movie-label'>Vote / Votes</p>\n          <p class='movie-disc disc-wrap'>\n           <span class='accent-detail__orange'>\n            ${vote_average.toFixed(1)}</span>\n            <span class='disc-space'> / </span> <span class=\"accent-detail__gray\">${vote_count}</span>\n         </p>\n     </div>\n     <div class='wrap-flex'>\n         <p class='movie-label'>Popularity</p>\n          <p class='movie-disc'>${popularity.toFixed(1)}</p>\n     </div>\n     <div class='wrap-flex'>\n         <p class='movie-label'>Original Title</p>\n         <p class='movie-disc movie-disc-title'>${original_title}</p>\n     </div>\n     <div class='wrap-flex'>\n        <p class='movie-label'>Genre</p>\n        <p class='movie-disc movie-disc-genres'>${genres\n          .map(genre => genre.name)\n          .join(', ')}</p>\n     </div>\n\n     <h3 class='disc-title'>About</h3>\n     <p class='disc-text'>${overview}</p>\n   </div>\n   <div class='button-container'>\n     <button type='button'  class='modal-btn btn-watched js-btn-watched'>add to watched</button>\n     <button type='button'class='modal-btn btn-queue js-btn-queue'>\n       add to queue\n     </button>\n   </div>\n   </div>\n </div>`;\n  document.querySelector('.wrap-disc').innerHTML = markup;\n\n  document\n    .querySelector('.backdrop')\n    .setAttribute(\n      'style',\n      `background-image: url(https://image.tmdb.org/t/p/original/${moviesData.backdrop_path}); background-position: center; background-size: cover;`\n    );\n  if (moviesData.backdrop_path === null) {\n    document\n      .querySelector('.backdrop')\n      .setAttribute(\n        'style',\n        `background-image: url(${defaultImgBack}); background-position: center; background-size: cover;`\n      );\n  }\n}\n\nexport function trimGenresLibraryList(genres) {\n  if (genres.length === 0) {\n    return `Other`;\n  } else if (genres.length <= 3) {\n    return genres.map(genre => genre.name);\n  } else {\n    return `${genres[0].name}, ${genres[1].name}, Other`;\n  }\n}\n\nexport function createMarkupLibraryList(moviesData) {\n  return moviesData\n    .map(movie => {\n      const { genres, id, poster_path, title, vote_average, release_date } =\n        movie;\n      const filterGenres = trimGenresLibraryList(genres);\n\n      return `<li class=\"films__item js-target\" data-id=\"${id}\">\n                  <div class=\"films__img-wrapper\">\n                   <img\n                    src=\"${poster_path? `https://image.tmdb.org/t/p/w500${poster_path}` : defaultImg}\"\n                    alt=\"${title}\"\n                    class=\"films__img\" loading=\"lazy\"\n                   />\n                   <div class=\"rating\">\n                     <p class=\"films__desk\">\n                       <span class=\"films__rating--text\"> Rating: </span>\n                       <span class=\"films__rating\">${vote_average.toFixed(1)}</span>\n                     </p>\n                    </div>\n                  </div>\n               <div class=\"films__info\">\n                 <p class=\"films__name\">${title}</p>\n                 <p class=\"films__desk\">\n                   <span class=\"films__genre\">${filterGenres}</span> |\n                    <span class=\"films__year\">${Number.parseInt(release_date)}</span>\n                  </p>\n               </div>\n             </li>`;\n    })\n    .join('');\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dATrs\")).toString();","import { createMarkupLibraryList } from './markup';\n\nconst list = document.querySelector('.js-films-list');\nconst libraryWatcehd = document.querySelector('.js-btn-library-watched');\nconst libraryQueue = document.querySelector('.js-btn-library-queue');\n\nconst watchedKey = 'watchedMovies';\nconst queuedKey = 'queueMovies';\nconst watchedFilms = localStorage.getItem(watchedKey);\nconst queueFilms = localStorage.getItem(queuedKey);\n\nexport function onQueue() {\n  libraryQueue.addEventListener('click', () => {\n    libraryWatcehd.classList.remove('main-btn--library-active');\n    libraryQueue.classList.add('main-btn--library-active');\n    if (queueFilms) {\n      list.innerHTML = createMarkupLibraryList(JSON.parse(queueFilms));\n    } else {\n      list.innerHTML =\n        '<div style=\"height: 500px; font-size: 24px\">Add films to your queue!</div>';\n      return;\n    }\n  });\n}\n\nexport function onWatched() {\n  libraryWatcehd.addEventListener('click', () => {\n    libraryQueue.classList.remove('main-btn--library-active');\n    libraryWatcehd.classList.add('main-btn--library-active');\n\n    if (watchedFilms) {\n      list.innerHTML = createMarkupLibraryList(JSON.parse(watchedFilms));\n    } else {\n      list.innerHTML =\n        '<div style=\"height: 500px; font-size: 24px\">Add films to your watched!</div>';\n      return;\n    }\n  });\n}\n\nexport function onLoadLibrary() {\n  if (queueFilms) {\n    list.innerHTML = createMarkupLibraryList(JSON.parse(queueFilms));\n  } else {\n    list.innerHTML =\n      '<div style=\"height: 500px; font-size: 24px\">Add films to your queue!</div>';\n    return;\n  }\n}\n","import { onQueue, onWatched, onLoadLibrary } from './js/library-markup';\nwindow.onload = onLoadLibrary();\n\nonQueue();\nonWatched();\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","URL","resolve","import","meta","url","toString","$263aef85a4d00bfb$export$3fbdede40b605168","moviesData","map","movie","genres","poster_path","title","vote_average","release_date","filterGenres","genre","name","$263aef85a4d00bfb$export$da0673e568f6360c","$parcel$interopDefault","$2f18717c950decc1$exports","toFixed","Number","parseInt","join","$ddb65353e6f828dc$var$list","document","querySelector","$ddb65353e6f828dc$var$libraryWatcehd","$ddb65353e6f828dc$var$libraryQueue","$ddb65353e6f828dc$var$watchedFilms","localStorage","getItem","$ddb65353e6f828dc$var$queueFilms","window","onload","innerHTML","addEventListener","classList","remove","add"],"version":3,"file":"library.efeed685.js.map"}